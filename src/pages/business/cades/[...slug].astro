---
import SocialMediaItem from "@/components/SocialMediaItem.astro";
// import fetchApi from "@/lib/strapi";
import incomingData from "@/data/temp_users/datasource-events-cades.json";
import BasicProfile from "@/layouts/BasicProfile.astro";

export async function getStaticPaths() {
  // const data: any = await fetchApi({
  //   endpoint: "/businesses/tas/all-employees",
  // });
  // const incomingData = data.profiles;
  return incomingData.map((entry: any) => ({
    params: {
      slug: entry.slug,
    },
    props: { entry },
  }));
}

const { entry } = Astro.props as any;
// DATA FOR STRAPI
// const data: any = entry.basic_user_profile;
const data: any = entry;
console.log(entry.social_links);
---

<BasicProfile
  username={data.username}
  title={data.title}
  about={data.about}
  email={data.email}
  profile_picture={data.profile_picture}
  phone_number={data.phone_number.toString()}
  whatsapp={data.phone_number.toString()}
>
  {
    entry.social_links.map(
      (socialMedia: {
        social_media: string;
        url: string;
        optionalName?: string;
      }) => {
        return (
          <SocialMediaItem
            socialMediaType={socialMedia.social_media}
            url={socialMedia.url}
            optionalName={socialMedia.optionalName}
          />
        );
      }
    )
  }
</BasicProfile>
