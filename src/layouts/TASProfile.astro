---
import BaseHead from "@components/BaseHead.astro";
import Footer from "@components/Footer.astro";
import { Image } from "astro:assets";
import logo from "@public/svg/logo.svg";
import PageQRCode from "@/components/PageQRCode.astro";
import TASNavbar from "@/components/TASNavbar.astro";
import WhatsAppButton from "@/components/WhatsAppButton.astro";

const {
  slug,
  username,
  title,
  about,
  profile_picture,
  phone_number,
  email,
  whatsapp,
} = Astro.props;
---

<html lang="en">
  <head>
    <BaseHead
      title={username}
      description={about}
      image={profile_picture}
      headerColor="#ffffff"
    />
  </head>
  <body>
    <TASNavbar
      username={username}
      title={title}
      profile_picture={profile_picture}
      phone_number={phone_number}
      email={email}
    />
    <section class="text-white min-h-screen">
      <div class="py-2 px-6 mx-auto max-w-screen-xl sm:py-8 lg:px-6">
        <div class="mx-auto max-w-screen-sm text-center">
          <div class="flex justify-center items-center pt-4 lg:mb-6 mb-6">
            <Image
              format={"avif"}
              alt={username}
              src={profile_picture ? profile_picture : logo}
              quality={"mid"}
              height={200}
              width={200}
              style="border-radius: 70px"
            />
          </div>
          <div class="text-center pb-2 text-base">
            <h6 class="font-semibold text-white">
              {username}
            </h6>
            <h6 class="text-white font-normal">{title}</h6>
          </div>

          <div>
            <div class="content mt-1 text-center text-about text-sm pb-6">
              {about}
            </div>
            <div class="flex justify-between align-middle">
              <!-- WHATSAPP BUTTON -->
              <WhatsAppButton whatsappNumber={whatsapp} widthClass="w-[80%]" />
              <!-- PHONE BUTTON -->
              <button
                type="submit"
                onclick={`location.href='tel:${whatsapp ?? ""}'`}
                class="inline-flex items-center justify-center cursor-pointer rounded-full w-14 h-14 bg-[#434749]"
              >
                <svg
                  width="21"
                  height="20"
                  viewBox="0 0 21 20"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <mask
                    id="mask0_153_259"
                    style="mask-type:alpha"
                    maskUnits="userSpaceOnUse"
                    x="0"
                    y="0"
                    width="21"
                    height="20"
                  >
                    <rect x="0.333374" width="20" height="20" fill="#D9D9D9"
                    ></rect>
                  </mask>
                  <g mask="url(#mask0_153_259)">
                    <path
                      d="M16.9584 17.5C15.2223 17.5 13.507 17.1215 11.8125 16.3646C10.1181 15.6076 8.57643 14.5347 7.18754 13.1458C5.79865 11.7569 4.72574 10.2153 3.96879 8.52083C3.21185 6.82639 2.83337 5.11111 2.83337 3.375C2.83337 3.125 2.91671 2.91667 3.08337 2.75C3.25004 2.58333 3.45837 2.5 3.70837 2.5H7.08337C7.27782 2.5 7.45143 2.56597 7.60421 2.69792C7.75698 2.82986 7.84726 2.98611 7.87504 3.16667L8.41671 6.08333C8.44449 6.30556 8.43754 6.49306 8.39587 6.64583C8.35421 6.79861 8.27782 6.93056 8.16671 7.04167L6.14587 9.08333C6.42365 9.59722 6.75351 10.0938 7.13546 10.5729C7.5174 11.0521 7.93754 11.5139 8.39587 11.9583C8.82643 12.3889 9.27782 12.7882 9.75004 13.1562C10.2223 13.5243 10.7223 13.8611 11.25 14.1667L13.2084 12.2083C13.3334 12.0833 13.4966 11.9896 13.698 11.9271C13.8993 11.8646 14.0973 11.8472 14.2917 11.875L17.1667 12.4583C17.3612 12.5139 17.5209 12.6146 17.6459 12.7604C17.7709 12.9062 17.8334 13.0694 17.8334 13.25V16.625C17.8334 16.875 17.75 17.0833 17.5834 17.25C17.4167 17.4167 17.2084 17.5 16.9584 17.5Z"
                      fill="white"></path>
                  </g>
                </svg>
              </button>
            </div>
          </div>
          <!-- SOCIALMEDIA -->
          <div>
            <slot />
          </div>
          <!-- /SOCIALMEDIA -->
          <!-- QR -->
          <div class="bg-white rounded-lg pb-8 mb-8">
            <PageQRCode />
            <label class="text-black font-bold text-sm capitalize"
              >{username}</label
            >
            <br />
            <label class="text-black capitalize text-xs">{title}</label>
          </div>
          <!-- /QR -->
        </div>
      </div>
      <Footer />
    </section>
  </body>
</html>
